{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.some.js\";\nimport { createRouter, createWebHistory } from 'vue-router';\nimport store from '../store';\nimport LoginSelection from '../views/LoginSelection.vue';\nimport AdminLogin from '../components/AdminLogin.vue';\nimport EmployeeLogin from '../components/EmployeeLogin.vue';\nimport EmployeeRegister from '../components/EmployeeRegister.vue';\nimport AdminDashboard from '../views/AdminDashboard.vue';\nimport EmployeeDashboard from '../views/EmployeeDashboard.vue';\nimport ManagePositions from '../views/ManagePositions.vue';\nimport EmployeeAttendance from '../views/EmployeeAttendance.vue';\nimport ManageEmployees from '../views/ManageEmployees.vue';\nimport SalarySlips from '../views/SalarySlips.vue';\nimport ManagePayHeads from '../views/ManagePayHeads.vue';\nimport MonthSelection from '../views/MonthSelection.vue';\nimport PayrollWithDeductions from '../views/PayrollWithDeductions.vue';\nimport EmployeeLeaveManagement from '../views/EmployeeLeaveManagement.vue';\nimport ListHolidays from '../views/ListHolidays.vue';\nimport EmployeeReports from '../views/EmployeeReports.vue';\nimport AdminLayout from '../layouts/AdminLayout.vue';\nimport EmployeeLayout from '../layouts/EmployeeLayout.vue';\nimport EmployeeAttendanceView from '../views/EmployeeAttendance.vue';\nimport EmployeeSalarySlips from '../views/EmployeeSalarySlips.vue';\nimport EmployeeLeaveManagementView from '../views/EmployeeLeaveManagement.vue';\nimport EmployeeHolidays from '../views/EmployeeHolidays.vue';\nimport EmployeeReportsView from '../views/EmployeeReports.vue';\nimport EmployeeLeaveRequest from '../views/EmployeeLeaveRequest.vue';\nconst routes = [{\n  path: '/',\n  component: LoginSelection\n}, {\n  path: '/admin-login',\n  component: AdminLogin\n}, {\n  path: '/employee-login',\n  component: EmployeeLogin\n}, {\n  path: '/register',\n  component: EmployeeRegister\n}, {\n  path: '/admin',\n  component: AdminLayout,\n  meta: {\n    requiresAuth: true,\n    role: 'admin'\n  },\n  children: [{\n    path: '',\n    component: AdminDashboard\n  }, {\n    path: 'manage-positions',\n    component: ManagePositions\n  }, {\n    path: 'employee-attendance',\n    component: EmployeeAttendance\n  }, {\n    path: 'manage-employees',\n    component: ManageEmployees\n  }, {\n    path: 'salary-slips',\n    component: SalarySlips\n  }, {\n    path: 'manage-pay-heads',\n    component: ManagePayHeads\n  }, {\n    path: 'month-selection',\n    component: MonthSelection\n  }, {\n    path: 'payroll-with-deductions',\n    component: PayrollWithDeductions\n  }, {\n    path: 'employee-leave-management',\n    component: EmployeeLeaveManagement\n  }, {\n    path: 'list-holidays',\n    component: ListHolidays\n  }, {\n    path: 'employee-reports',\n    component: EmployeeReports\n  }]\n}, {\n  path: '/employee',\n  component: EmployeeLayout,\n  meta: {\n    requiresAuth: true,\n    role: 'employee'\n  },\n  children: [{\n    path: '',\n    component: EmployeeDashboard\n  }, {\n    path: 'attendance',\n    component: EmployeeAttendanceView\n  }, {\n    path: 'salary-slips',\n    component: EmployeeSalarySlips\n  }, {\n    path: 'leave-management',\n    component: EmployeeLeaveManagementView\n  }, {\n    path: 'holidays',\n    component: EmployeeHolidays\n  }, {\n    path: 'reports',\n    component: EmployeeReportsView\n  }, {\n    path: '/employee/employee-leave-request',\n    name: 'EmployeeLeaveRequest',\n    component: EmployeeLeaveRequest\n  }]\n}];\nconst router = createRouter({\n  history: createWebHistory(),\n  routes\n});\nrouter.beforeEach((to, from, next) => {\n  if (to.matched.some(record => record.meta.requiresAuth)) {\n    const user = store.state.user;\n    if (!user) {\n      next('/');\n    } else if (to.meta.role && to.meta.role !== user.role) {\n      next('/');\n    } else {\n      next();\n    }\n  } else {\n    next();\n  }\n});\nrouter.afterEach(to => {\n  if (to.matched.some(record => record.meta.requiresAuth)) {\n    // Prevent navigating back to login page\n    window.history.pushState(null, '', window.location.href);\n  }\n});\nwindow.addEventListener('popstate', event => {\n  const user = store.state.user;\n  if (user && (event.state === null || event.state === undefined)) {\n    // Prevent navigating back to login pages\n    router.push(user.role === 'admin' ? '/admin' : '/employee');\n  }\n});\nexport default router;","map":{"version":3,"names":["createRouter","createWebHistory","store","LoginSelection","AdminLogin","EmployeeLogin","EmployeeRegister","AdminDashboard","EmployeeDashboard","ManagePositions","EmployeeAttendance","ManageEmployees","SalarySlips","ManagePayHeads","MonthSelection","PayrollWithDeductions","EmployeeLeaveManagement","ListHolidays","EmployeeReports","AdminLayout","EmployeeLayout","EmployeeAttendanceView","EmployeeSalarySlips","EmployeeLeaveManagementView","EmployeeHolidays","EmployeeReportsView","EmployeeLeaveRequest","routes","path","component","meta","requiresAuth","role","children","name","router","history","beforeEach","to","from","next","matched","some","record","user","state","afterEach","window","pushState","location","href","addEventListener","event","undefined","push"],"sources":["C:/Users/ASUS/Desktop/Payroll_system/frontend/src/router/index.js"],"sourcesContent":["import { createRouter, createWebHistory } from 'vue-router';\r\nimport store from '../store';\r\nimport LoginSelection from '../views/LoginSelection.vue';\r\nimport AdminLogin from '../components/AdminLogin.vue';\r\nimport EmployeeLogin from '../components/EmployeeLogin.vue';\r\nimport EmployeeRegister from '../components/EmployeeRegister.vue';\r\nimport AdminDashboard from '../views/AdminDashboard.vue';\r\nimport EmployeeDashboard from '../views/EmployeeDashboard.vue';\r\nimport ManagePositions from '../views/ManagePositions.vue';\r\nimport EmployeeAttendance from '../views/EmployeeAttendance.vue';\r\nimport ManageEmployees from '../views/ManageEmployees.vue';\r\nimport SalarySlips from '../views/SalarySlips.vue';\r\nimport ManagePayHeads from '../views/ManagePayHeads.vue';\r\nimport MonthSelection from '../views/MonthSelection.vue';\r\nimport PayrollWithDeductions from '../views/PayrollWithDeductions.vue';\r\nimport EmployeeLeaveManagement from '../views/EmployeeLeaveManagement.vue';\r\nimport ListHolidays from '../views/ListHolidays.vue';\r\nimport EmployeeReports from '../views/EmployeeReports.vue';\r\nimport AdminLayout from '../layouts/AdminLayout.vue';\r\nimport EmployeeLayout from '../layouts/EmployeeLayout.vue';\r\nimport EmployeeAttendanceView from '../views/EmployeeAttendance.vue';\r\nimport EmployeeSalarySlips from '../views/EmployeeSalarySlips.vue';\r\nimport EmployeeLeaveManagementView from '../views/EmployeeLeaveManagement.vue';\r\nimport EmployeeHolidays from '../views/EmployeeHolidays.vue';\r\nimport EmployeeReportsView from '../views/EmployeeReports.vue';\r\nimport EmployeeLeaveRequest from '../views/EmployeeLeaveRequest.vue'; \r\n\r\n\r\nconst routes = [\r\n  { path: '/', component: LoginSelection },\r\n  { path: '/admin-login', component: AdminLogin },\r\n  { path: '/employee-login', component: EmployeeLogin },\r\n  { path: '/register', component: EmployeeRegister },\r\n  {\r\n    path: '/admin',\r\n    component: AdminLayout,\r\n    meta: { requiresAuth: true, role: 'admin' },\r\n    children: [\r\n      { path: '', component: AdminDashboard },\r\n      { path: 'manage-positions', component: ManagePositions },\r\n      { path: 'employee-attendance', component: EmployeeAttendance },\r\n      { path: 'manage-employees', component: ManageEmployees },\r\n      { path: 'salary-slips', component: SalarySlips },\r\n      { path: 'manage-pay-heads', component: ManagePayHeads },\r\n      { path: 'month-selection', component: MonthSelection },\r\n      { path: 'payroll-with-deductions', component: PayrollWithDeductions },\r\n      { path: 'employee-leave-management', component: EmployeeLeaveManagement },\r\n      { path: 'list-holidays', component: ListHolidays },\r\n      { path: 'employee-reports', component: EmployeeReports },\r\n    ],\r\n  },\r\n  {\r\n    path: '/employee',\r\n    component: EmployeeLayout,\r\n    meta: { requiresAuth: true, role: 'employee' },\r\n    children: [\r\n      { path: '', component: EmployeeDashboard },\r\n      { path: 'attendance', component: EmployeeAttendanceView },\r\n      { path: 'salary-slips', component: EmployeeSalarySlips },\r\n      { path: 'leave-management', component: EmployeeLeaveManagementView },\r\n      { path: 'holidays', component: EmployeeHolidays },\r\n      { path: 'reports', component: EmployeeReportsView },\r\n      { path: '/employee/employee-leave-request', name: 'EmployeeLeaveRequest', component: EmployeeLeaveRequest },\r\n    ],\r\n  },\r\n];\r\n\r\nconst router = createRouter({\r\n  history: createWebHistory(),\r\n  routes,\r\n});\r\n\r\nrouter.beforeEach((to, from, next) => {\r\n  if (to.matched.some(record => record.meta.requiresAuth)) {\r\n    const user = store.state.user;\r\n    if (!user) {\r\n      next('/');\r\n    } else if (to.meta.role && to.meta.role !== user.role) {\r\n      next('/');\r\n    } else {\r\n      next();\r\n    }\r\n  } else {\r\n    next();\r\n  }\r\n});\r\n\r\nrouter.afterEach((to) => {\r\n  if (to.matched.some(record => record.meta.requiresAuth)) {\r\n    // Prevent navigating back to login page\r\n    window.history.pushState(null, '', window.location.href);\r\n  }\r\n});\r\n\r\nwindow.addEventListener('popstate', (event) => {\r\n  const user = store.state.user;\r\n  if (user && (event.state === null || event.state === undefined)) {\r\n    // Prevent navigating back to login pages\r\n    router.push(user.role === 'admin' ? '/admin' : '/employee');\r\n  }\r\n});\r\n\r\nexport default router;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}