{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, openBlock as _openBlock, createBlock as _createBlock, createVNode as _createVNode, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 p-1\"\n};\nconst _hoisted_2 = {\n  class: \"max-w-6xl mx-auto\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_PayHeadModal = _resolveComponent(\"PayHeadModal\");\n  const _component_PayHeadTable = _resolveComponent(\"PayHeadTable\");\n  const _component_EmployeePayrollTable = _resolveComponent(\"EmployeePayrollTable\");\n  const _component_AddPayheadModal = _resolveComponent(\"AddPayheadModal\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createCommentVNode(\" Add Pay Head Button \"), _createElementVNode(\"button\", {\n    class: \"mb-4 py-2 px-4 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 transition-all duration-200\",\n    onClick: _cache[0] || (_cache[0] = $event => $data.showAddModal = true)\n  }, \"Add Pay Head\"), _createCommentVNode(\" Add Pay Head Modal \"), $data.showAddModal ? (_openBlock(), _createBlock(_component_PayHeadModal, {\n    key: 0,\n    onClose: _cache[1] || (_cache[1] = $event => $data.showAddModal = false),\n    onSave: $options.addPayHead,\n    payHead: $data.newPayHead\n  }, null, 8 /* PROPS */, [\"onSave\", \"payHead\"])) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" Update Pay Head Modal \"), $data.showUpdateModal ? (_openBlock(), _createBlock(_component_PayHeadModal, {\n    key: 1,\n    onClose: _cache[2] || (_cache[2] = $event => $data.showUpdateModal = false),\n    onSave: $options.updatePayHead,\n    payHead: $data.selectedPayHead,\n    isUpdate: \"\"\n  }, null, 8 /* PROPS */, [\"onSave\", \"payHead\"])) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" Table to Display Pay Heads \"), _createVNode(_component_PayHeadTable, {\n    payHeads: $data.payHeads,\n    onUpdate: $options.showUpdatePayHeadModal,\n    onDelete: $options.deletePayHead\n  }, null, 8 /* PROPS */, [\"payHeads\", \"onUpdate\", \"onDelete\"]), _createCommentVNode(\" New Container for Employee Payroll Information \"), _createVNode(_component_EmployeePayrollTable, {\n    employees: $data.employees,\n    onAddPayhead: $options.openAddPayheadModal\n  }, null, 8 /* PROPS */, [\"employees\", \"onAddPayhead\"]), _createCommentVNode(\" Add Payhead to Employee Modal \"), $data.showAddPayheadModal ? (_openBlock(), _createBlock(_component_AddPayheadModal, {\n    key: 2,\n    onClose: _cache[3] || (_cache[3] = $event => $data.showAddPayheadModal = false),\n    onSave: $options.savePayheads,\n    availablePayheads: $data.availablePayheads,\n    selectedEmployeePayheads: $data.selectedEmployeePayheads,\n    onAddPayhead: $options.addPayheadToEmployee,\n    onRemovePayhead: $options.removePayheadFromEmployee,\n    totalPayableSalary: $options.totalPayableSalary\n  }, null, 8 /* PROPS */, [\"onSave\", \"availablePayheads\", \"selectedEmployeePayheads\", \"onAddPayhead\", \"onRemovePayhead\", \"totalPayableSalary\"])) : _createCommentVNode(\"v-if\", true)])]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_createCommentVNode","onClick","_cache","$event","$data","showAddModal","_createBlock","_component_PayHeadModal","key","onClose","onSave","$options","addPayHead","payHead","newPayHead","showUpdateModal","updatePayHead","selectedPayHead","isUpdate","_createVNode","_component_PayHeadTable","payHeads","onUpdate","showUpdatePayHeadModal","onDelete","deletePayHead","_component_EmployeePayrollTable","employees","onAddPayhead","openAddPayheadModal","showAddPayheadModal","_component_AddPayheadModal","savePayheads","availablePayheads","selectedEmployeePayheads","addPayheadToEmployee","onRemovePayhead","removePayheadFromEmployee","totalPayableSalary"],"sources":["C:\\Users\\ASUS\\Desktop\\Payroll_system\\frontend\\src\\views\\ManagePayHeads.vue"],"sourcesContent":["<template>\r\n  <div class=\"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 p-1\">\r\n    <div class=\"max-w-6xl mx-auto\">\r\n      <!-- Add Pay Head Button -->\r\n      <button class=\"mb-4 py-2 px-4 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 transition-all duration-200\" @click=\"showAddModal = true\">Add Pay Head</button>\r\n      \r\n      <!-- Add Pay Head Modal -->\r\n      <PayHeadModal v-if=\"showAddModal\" @close=\"showAddModal = false\" @save=\"addPayHead\" :payHead=\"newPayHead\" />\r\n\r\n      <!-- Update Pay Head Modal -->\r\n      <PayHeadModal v-if=\"showUpdateModal\" @close=\"showUpdateModal = false\" @save=\"updatePayHead\" :payHead=\"selectedPayHead\" isUpdate />\r\n\r\n      <!-- Table to Display Pay Heads -->\r\n      <PayHeadTable :payHeads=\"payHeads\" @update=\"showUpdatePayHeadModal\" @delete=\"deletePayHead\" />\r\n\r\n      <!-- New Container for Employee Payroll Information -->\r\n      <EmployeePayrollTable :employees=\"employees\" @addPayhead=\"openAddPayheadModal\" />\r\n\r\n      <!-- Add Payhead to Employee Modal -->\r\n      <AddPayheadModal v-if=\"showAddPayheadModal\" @close=\"showAddPayheadModal = false\" @save=\"savePayheads\" :availablePayheads=\"availablePayheads\" :selectedEmployeePayheads=\"selectedEmployeePayheads\" @addPayhead=\"addPayheadToEmployee\" @removePayhead=\"removePayheadFromEmployee\" :totalPayableSalary=\"totalPayableSalary\" />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport PayHeadModal from './components/PayHeadModal.vue';\r\nimport PayHeadTable from './components/PayHeadTable.vue';\r\nimport EmployeePayrollTable from './components/EmployeePayrollTable.vue';\r\nimport AddPayheadModal from './components/AddPayheadModal.vue';\r\n\r\nexport default {\r\n  name: 'ManagePayHeads',\r\n  components: {\r\n    PayHeadModal,\r\n    PayHeadTable,\r\n    EmployeePayrollTable,\r\n    AddPayheadModal\r\n  },\r\n  data() {\r\n    return {\r\n      payHeads: [],\r\n      employees: [],\r\n      newPayHead: {\r\n        name: '',\r\n        amount: '',\r\n        type: 'Earnings'\r\n      },\r\n      selectedPayHead: {\r\n        id: '',\r\n        name: '',\r\n        amount: '',\r\n        type: 'Earnings'\r\n      },\r\n      showAddModal: false,\r\n      showUpdateModal: false,\r\n      showAddPayheadModal: false,\r\n      selectedEmployee: null,\r\n      selectedEmployeePayheads: [],\r\n      availablePayheads: [],\r\n    };\r\n  },\r\n  computed: {\r\n    totalPayableSalary() {\r\n      const earnings = this.selectedEmployeePayheads.filter(p => p.type === 'Earnings').reduce((sum, p) => sum + p.amount, 0);\r\n      const deductions = this.selectedEmployeePayheads.filter(p => p.type === 'Deductions').reduce((sum, p) => sum + p.amount, 0);\r\n      return earnings - deductions;\r\n    }\r\n  },\r\n  async created() {\r\n    await this.fetchPayHeads();\r\n    await this.fetchEmployees();\r\n  },\r\n  methods: {\r\n    async fetchPayHeads() {\r\n      // Fetch pay heads from API\r\n      // Example: this.payHeads = await api.getPayHeads();\r\n      this.payHeads = [\r\n        { id: 1, name: 'Basic Salary', amount: 30000, type: 'Earnings' },\r\n        { id: 2, name: 'Health Insurance', amount: 2000, type: 'Deductions' },\r\n      ];\r\n    },\r\n    async fetchEmployees() {\r\n      // Fetch employees from API\r\n      // Example: this.employees = await api.getEmployees();\r\n      this.employees = [\r\n        { id: 1, name: 'John Doe', position: 'Software Engineer', totalDeduction: 2000, totalEarnings: 30000, totalSalary: 28000 },\r\n        { id: 2, name: 'Jane Smith', position: 'Product Manager', totalDeduction: 1500, totalEarnings: 35000, totalSalary: 33500 },\r\n      ];\r\n    },\r\n    addPayHead(payHead) {\r\n      this.payHeads.push({ ...payHead, id: Date.now() });\r\n      this.showAddModal = false;\r\n    },\r\n    showUpdatePayHeadModal(payHead) {\r\n      this.selectedPayHead = { ...payHead };\r\n      this.showUpdateModal = true;\r\n    },\r\n    updatePayHead(updatedPayHead) {\r\n      const index = this.payHeads.findIndex(ph => ph.id === updatedPayHead.id);\r\n      if (index !== -1) {\r\n        this.payHeads.splice(index, 1, updatedPayHead);\r\n        this.showUpdateModal = false;\r\n      }\r\n    },\r\n    deletePayHead(id) {\r\n      this.payHeads = this.payHeads.filter(payHead => payHead.id !== id);\r\n    },\r\n    openAddPayheadModal(employee) {\r\n      this.selectedEmployee = employee;\r\n      this.selectedEmployeePayheads = [];\r\n      this.availablePayheads = this.payHeads;\r\n      this.showAddPayheadModal = true;\r\n    },\r\n    addPayheadToEmployee(payhead) {\r\n      this.selectedEmployeePayheads.push(payhead);\r\n      this.availablePayheads = this.availablePayheads.filter(p => p.id !== payhead.id);\r\n    },\r\n    removePayheadFromEmployee(payhead) {\r\n      this.selectedEmployeePayheads = this.selectedEmployeePayheads.filter(p => p.id !== payhead.id);\r\n      this.availablePayheads.push(payhead);\r\n    },\r\n    savePayheads() {\r\n      // Logic to save payheads to the selected employee\r\n      this.showAddPayheadModal = false;\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n</style>"],"mappings":";;EACOA,KAAK,EAAC;AAA6D;;EACjEA,KAAK,EAAC;AAAmB;;;;;;uBADhCC,mBAAA,CAoBM,OApBNC,UAoBM,GAnBJC,mBAAA,CAkBM,OAlBNC,UAkBM,GAjBJC,mBAAA,yBAA4B,EAC5BF,mBAAA,CAA+K;IAAvKH,KAAK,EAAC,8GAA8G;IAAEM,OAAK,EAAAC,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAAEC,KAAA,CAAAC,YAAY;KAAS,cAAY,GAEtKL,mBAAA,wBAA2B,EACPI,KAAA,CAAAC,YAAY,I,cAAhCC,YAAA,CAA2GC,uBAAA;IAPjHC,GAAA;IAOyCC,OAAK,EAAAP,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAAEC,KAAA,CAAAC,YAAY;IAAWK,MAAI,EAAEC,QAAA,CAAAC,UAAU;IAAGC,OAAO,EAAET,KAAA,CAAAU;oDAPnGd,mBAAA,gBASMA,mBAAA,2BAA8B,EACVI,KAAA,CAAAW,eAAe,I,cAAnCT,YAAA,CAAkIC,uBAAA;IAVxIC,GAAA;IAU4CC,OAAK,EAAAP,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAAEC,KAAA,CAAAW,eAAe;IAAWL,MAAI,EAAEC,QAAA,CAAAK,aAAa;IAAGH,OAAO,EAAET,KAAA,CAAAa,eAAe;IAAEC,QAAQ,EAAR;oDAV7HlB,mBAAA,gBAYMA,mBAAA,gCAAmC,EACnCmB,YAAA,CAA8FC,uBAAA;IAA/EC,QAAQ,EAAEjB,KAAA,CAAAiB,QAAQ;IAAGC,QAAM,EAAEX,QAAA,CAAAY,sBAAsB;IAAGC,QAAM,EAAEb,QAAA,CAAAc;iEAE7EzB,mBAAA,oDAAuD,EACvDmB,YAAA,CAAiFO,+BAAA;IAA1DC,SAAS,EAAEvB,KAAA,CAAAuB,SAAS;IAAGC,YAAU,EAAEjB,QAAA,CAAAkB;0DAE1D7B,mBAAA,mCAAsC,EACfI,KAAA,CAAA0B,mBAAmB,I,cAA1CxB,YAAA,CAA2TyB,0BAAA;IAnBjUvB,GAAA;IAmBmDC,OAAK,EAAAP,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAAEC,KAAA,CAAA0B,mBAAmB;IAAWpB,MAAI,EAAEC,QAAA,CAAAqB,YAAY;IAAGC,iBAAiB,EAAE7B,KAAA,CAAA6B,iBAAiB;IAAGC,wBAAwB,EAAE9B,KAAA,CAAA8B,wBAAwB;IAAGN,YAAU,EAAEjB,QAAA,CAAAwB,oBAAoB;IAAGC,eAAa,EAAEzB,QAAA,CAAA0B,yBAAyB;IAAGC,kBAAkB,EAAE3B,QAAA,CAAA2B;mJAnB3StC,mBAAA,e","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}