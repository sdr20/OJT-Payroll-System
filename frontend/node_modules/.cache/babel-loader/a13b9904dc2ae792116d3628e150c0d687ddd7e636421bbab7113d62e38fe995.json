{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport \"core-js/modules/web.url-search-params.delete.js\";\nimport \"core-js/modules/web.url-search-params.has.js\";\nimport \"core-js/modules/web.url-search-params.size.js\";\nimport axios from 'axios';\nexport default {\n  name: 'AdminDashboard',\n  data() {\n    return {\n      totalEmployees: 0,\n      totalPresentToday: 0,\n      totalLateToday: 0,\n      totalEligibleForSalaryToday: 0,\n      attendanceRecords: [],\n      isProcessingPayroll: false,\n      showDetailsModal: false,\n      selectedEmployee: {},\n      statusMessage: ''\n    };\n  },\n  created() {\n    this.fetchDashboardData();\n  },\n  methods: {\n    async fetchDashboardData() {\n      await Promise.all([this.fetchTotalEmployees(), this.fetchAttendanceRecords(), this.fetchTotalLateToday(), this.fetchEligibleForSalary()]);\n    },\n    async fetchTotalEmployees() {\n      try {\n        const response = await axios.get('http://localhost:7777/api/employees/count');\n        this.totalEmployees = response.data.total || 0;\n      } catch (error) {\n        console.error('Failed to fetch total employees:', error);\n        this.totalEmployees = 0;\n        this.showErrorMessage('Failed to fetch total employees.');\n      }\n    },\n    async fetchAttendanceRecords() {\n      try {\n        const today = new Date().toISOString().split('T')[0];\n        const response = await axios.get(`http://localhost:7777/api/attendance?date=${today}`);\n        this.attendanceRecords = response.data || [];\n        this.totalPresentToday = this.attendanceRecords.filter(r => r.signInTime).length;\n      } catch (error) {\n        console.error('Failed to fetch attendance records:', error);\n        this.attendanceRecords = [];\n        this.totalPresentToday = 0;\n        this.showErrorMessage('Failed to fetch attendance records.');\n      }\n    },\n    async fetchTotalLateToday() {\n      try {\n        const today = new Date().toISOString().split('T')[0];\n        const response = await axios.get(`http://localhost:7777/api/attendance/late?date=${today}`);\n        this.totalLateToday = response.data.total || 0;\n      } catch (error) {\n        console.error('Failed to fetch total late today:', error);\n        this.totalLateToday = 0;\n        this.showErrorMessage('Failed to fetch late employees count.');\n      }\n    },\n    async fetchEligibleForSalary() {\n      try {\n        const response = await axios.get('http://localhost:7777/api/employees/eligible-for-salary');\n        this.totalEligibleForSalaryToday = response.data.total || 0;\n      } catch (error) {\n        console.error('Failed to fetch eligible for salary:', error);\n        this.totalEligibleForSalaryToday = 0;\n        this.showErrorMessage('Failed to fetch salary eligibility data.');\n      }\n    },\n    async refreshAttendance() {\n      try {\n        await this.fetchAttendanceRecords();\n        await this.fetchTotalLateToday();\n        this.showSuccessMessage('Attendance data refreshed successfully!');\n      } catch (error) {\n        this.showErrorMessage('Failed to refresh attendance data.');\n      }\n    },\n    async processPayroll() {\n      this.isProcessingPayroll = true;\n      try {\n        const response = await axios.post('http://localhost:7777/api/payroll/process');\n        if (response.data.success) {\n          this.showSuccessMessage('Payroll processed successfully!');\n          await this.fetchEligibleForSalary();\n        } else {\n          this.showErrorMessage('Failed to process payroll.');\n        }\n      } catch (error) {\n        console.error('Failed to process payroll:', error);\n        this.showErrorMessage('Error processing payroll. Please try again.');\n      } finally {\n        this.isProcessingPayroll = false;\n      }\n    },\n    async exportAttendance() {\n      try {\n        const csvContent = [['Employee ID', 'Name', 'Position', 'Sign In Time', 'Sign Out Time', 'Status'], ...this.attendanceRecords.map(record => [record.employeeId, `${record.firstName} ${record.lastName}`, record.position, record.signInTime || 'N/A', record.signOutTime || 'N/A', record.status || 'Absent'])].map(row => row.join(',')).join('\\n');\n        const blob = new Blob([csvContent], {\n          type: 'text/csv;charset=utf-8;'\n        });\n        const link = document.createElement('a');\n        link.href = URL.createObjectURL(blob);\n        link.download = `attendance_${new Date().toISOString().split('T')[0]}.csv`;\n        document.body.appendChild(link);\n        link.click();\n        document.body.removeChild(link);\n        this.showSuccessMessage('Attendance exported successfully!');\n      } catch (error) {\n        console.error('Failed to export attendance:', error);\n        this.showErrorMessage('Failed to export attendance data.');\n      }\n    },\n    viewEmployeeDetails(record) {\n      this.selectedEmployee = {\n        ...record\n      };\n      this.showDetailsModal = true;\n    },\n    async deleteAttendance(id) {\n      if (confirm('Are you sure you want to delete this attendance record?')) {\n        try {\n          const response = await axios.delete(`http://localhost:7777/api/attendance/${id}`);\n          if (response.status === 204) {\n            this.attendanceRecords = this.attendanceRecords.filter(r => r.id !== id);\n            this.totalPresentToday = this.attendanceRecords.filter(r => r.signInTime).length;\n            this.showSuccessMessage('Attendance record deleted successfully!');\n          }\n        } catch (error) {\n          console.error('Failed to delete attendance:', error);\n          this.showErrorMessage('Failed to delete attendance record.');\n        }\n      }\n    },\n    logout() {\n      localStorage.removeItem('userId');\n      localStorage.removeItem('userRole');\n      this.$router.push('/login');\n    },\n    getStatusClass(status) {\n      switch (status?.toLowerCase()) {\n        case 'on time':\n          return 'text-green-600 font-medium';\n        case 'late':\n          return 'text-yellow-600 font-medium';\n        case 'absent':\n          return 'text-red-600 font-medium';\n        default:\n          return 'text-gray-600';\n      }\n    },\n    showSuccessMessage(message) {\n      this.statusMessage = message;\n      setTimeout(() => this.statusMessage = '', 3000);\n    },\n    showErrorMessage(message) {\n      this.statusMessage = message;\n      setTimeout(() => this.statusMessage = '', 3000);\n    }\n  }\n};","map":{"version":3,"names":["axios","name","data","totalEmployees","totalPresentToday","totalLateToday","totalEligibleForSalaryToday","attendanceRecords","isProcessingPayroll","showDetailsModal","selectedEmployee","statusMessage","created","fetchDashboardData","methods","Promise","all","fetchTotalEmployees","fetchAttendanceRecords","fetchTotalLateToday","fetchEligibleForSalary","response","get","total","error","console","showErrorMessage","today","Date","toISOString","split","filter","r","signInTime","length","refreshAttendance","showSuccessMessage","processPayroll","post","success","exportAttendance","csvContent","map","record","employeeId","firstName","lastName","position","signOutTime","status","row","join","blob","Blob","type","link","document","createElement","href","URL","createObjectURL","download","body","appendChild","click","removeChild","viewEmployeeDetails","deleteAttendance","id","confirm","delete","logout","localStorage","removeItem","$router","push","getStatusClass","toLowerCase","message","setTimeout"],"sources":["C:\\Users\\ASUS\\Desktop\\Payroll_system\\frontend\\src\\views\\admind\\AdminDashboard.vue"],"sourcesContent":["<template>\r\n  <div class=\"min-h-screen bg-gray-50\">\r\n    <!-- Top Navigation Bar -->\r\n    <nav class=\"bg-white shadow-sm\">\r\n      <div class=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\r\n        <div class=\"flex justify-between h-16\">\r\n          <div class=\"flex items-center\">\r\n            <h1 class=\"text-xl font-bold text-gray-900\">Admin Dashboard</h1>\r\n          </div>\r\n          <div class=\"flex items-center space-x-4\">\r\n            <span class=\"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-indigo-100 text-indigo-800\">\r\n              Admin\r\n            </span>\r\n           \r\n          </div>\r\n        </div>\r\n      </div>\r\n    </nav>\r\n\r\n    <div class=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\r\n      <!-- Stats Overview -->\r\n      <div class=\"grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-4\">\r\n        <!-- Total Employees Card -->\r\n        <div class=\"bg-white overflow-hidden shadow rounded-lg\">\r\n          <div class=\"p-5\">\r\n            <div class=\"flex items-center\">\r\n              <div class=\"flex-shrink-0\">\r\n                <div class=\"rounded-md bg-indigo-500 p-3\">\r\n                  <svg class=\"h-6 w-6 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z\" />\r\n                  </svg>\r\n                </div>\r\n              </div>\r\n              <div class=\"ml-5 w-0 flex-1\">\r\n                <dl>\r\n                  <dt class=\"text-sm font-medium text-gray-500 truncate\">Total Employees</dt>\r\n                  <dd class=\"text-2xl font-semibold text-gray-900\">{{ totalEmployees }}</dd>\r\n                </dl>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"bg-gray-50 px-5 py-3\">\r\n            <div class=\"text-sm\">\r\n              <router-link to=\"/manage-employees\" class=\"font-medium text-indigo-600 hover:text-indigo-900\">View all</router-link>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- Present Today Card -->\r\n        <div class=\"bg-white overflow-hidden shadow rounded-lg\">\r\n          <div class=\"p-5\">\r\n            <div class=\"flex items-center\">\r\n              <div class=\"flex-shrink-0\">\r\n                <div class=\"rounded-md bg-green-500 p-3\">\r\n                  <svg class=\"h-6 w-6 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\" />\r\n                  </svg>\r\n                </div>\r\n              </div>\r\n              <div class=\"ml-5 w-0 flex-1\">\r\n                <dl>\r\n                  <dt class=\"text-sm font-medium text-gray-500 truncate\">Present Today</dt>\r\n                  <dd class=\"text-2xl font-semibold text-gray-900\">{{ totalPresentToday }}</dd>\r\n                </dl>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"bg-gray-50 px-5 py-3\">\r\n            <div class=\"text-sm\">\r\n              <button @click=\"refreshAttendance\" class=\"font-medium text-green-600 hover:text-green-900\">Refresh</button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- Late Today Card -->\r\n        <div class=\"bg-white overflow-hidden shadow rounded-lg\">\r\n          <div class=\"p-5\">\r\n            <div class=\"flex items-center\">\r\n              <div class=\"flex-shrink-0\">\r\n                <div class=\"rounded-md bg-yellow-500 p-3\">\r\n                  <svg class=\"h-6 w-6 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z\" />\r\n                  </svg>\r\n                </div>\r\n              </div>\r\n              <div class=\"ml-5 w-0 flex-1\">\r\n                <dl>\r\n                  <dt class=\"text-sm font-medium text-gray-500 truncate\">Late Today</dt>\r\n                  <dd class=\"text-2xl font-semibold text-gray-900\">{{ totalLateToday }}</dd>\r\n                </dl>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"bg-gray-50 px-5 py-3\">\r\n            <div class=\"text-sm\">\r\n              <button @click=\"refreshAttendance\" class=\"font-medium text-yellow-600 hover:text-yellow-900\">Refresh</button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- Eligible for Salary Card -->\r\n        <div class=\"bg-white overflow-hidden shadow rounded-lg\">\r\n          <div class=\"p-5\">\r\n            <div class=\"flex items-center\">\r\n              <div class=\"flex-shrink-0\">\r\n                <div class=\"rounded-md bg-blue-500 p-3\">\r\n                  <svg class=\"h-6 w-6 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\r\n                  </svg>\r\n                </div>\r\n              </div>\r\n              <div class=\"ml-5 w-0 flex-1\">\r\n                <dl>\r\n                  <dt class=\"text-sm font-medium text-gray-500 truncate\">Eligible for Salary</dt>\r\n                  <dd class=\"text-2xl font-semibold text-gray-900\">{{ totalEligibleForSalaryToday }}</dd>\r\n                </dl>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"bg-gray-50 px-5 py-3\">\r\n            <div class=\"text-sm\">\r\n              <button @click=\"processPayroll\" class=\"font-medium text-blue-600 hover:text-blue-900\" :disabled=\"isProcessingPayroll\">\r\n                {{ isProcessingPayroll ? 'Processing...' : 'Process Payroll' }}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Attendance Table Section -->\r\n      <div class=\"mt-8 bg-white shadow overflow-hidden sm:rounded-lg\">\r\n        <div class=\"px-4 py-5 sm:px-6 flex justify-between items-center\">\r\n          <h2 class=\"text-lg leading-6 font-medium text-gray-900\">Attendance Today</h2>\r\n          <div class=\"flex space-x-3\">\r\n            <button @click=\"exportAttendance\" class=\"bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition-colors duration-200\">\r\n              Export to CSV\r\n            </button>\r\n            <!-- Uncomment if you want to link to salary slips -->\r\n            <!-- <router-link to=\"/salary-slips\" class=\"bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600 transition-colors duration-200\">\r\n              View Salary Slips\r\n            </router-link> -->\r\n          </div>\r\n        </div>\r\n        <div class=\"overflow-x-auto\">\r\n          <table class=\"min-w-full divide-y divide-gray-200\">\r\n            <thead class=\"bg-gray-50\">\r\n              <tr>\r\n                <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Employee ID</th>\r\n                <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Name</th>\r\n                <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Position</th>\r\n                <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Sign In Time</th>\r\n                <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Sign Out Time</th>\r\n                <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Status</th>\r\n                <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Actions</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody class=\"bg-white divide-y divide-gray-200\">\r\n              <tr v-for=\"record in attendanceRecords\" :key=\"record.id\" class=\"hover:bg-gray-50\">\r\n                <td class=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">{{ record.employeeId }}</td>\r\n                <td class=\"px-6 py-4 whitespace-nowrap\">\r\n                  <div class=\"flex items-center\">\r\n                    <div class=\"h-10 w-10 flex-shrink-0\">\r\n                      <img class=\"h-10 w-10 rounded-full\" :src=\"`https://ui-avatars.com/api/?name=${record.firstName}+${record.lastName}`\" alt=\"\" />\r\n                    </div>\r\n                    <div class=\"ml-4\">\r\n                      <div class=\"text-sm font-medium text-gray-900\">{{ record.firstName }} {{ record.lastName }}</div>\r\n                    </div>\r\n                  </div>\r\n                </td>\r\n                <td class=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">{{ record.position }}</td>\r\n                <td class=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">{{ record.signInTime || '--' }}</td>\r\n                <td class=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">{{ record.signOutTime || '--' }}</td>\r\n                <td class=\"px-6 py-4 whitespace-nowrap text-sm\" :class=\"getStatusClass(record.status)\">\r\n                  {{ record.status || 'Absent' }}\r\n                </td>\r\n                <td class=\"px-6 py-4 whitespace-nowrap text-sm\">\r\n                  <button @click=\"viewEmployeeDetails(record)\" class=\"text-blue-600 hover:text-blue-900 mr-2\">View</button>\r\n                  <button @click=\"deleteAttendance(record.id)\" class=\"text-red-600 hover:text-red-900\">Delete</button>\r\n                </td>\r\n              </tr>\r\n              <tr v-if=\"attendanceRecords.length === 0\">\r\n                <td colspan=\"7\" class=\"px-6 py-4 text-center text-sm text-gray-500\">No attendance records for today.</td>\r\n              </tr>\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Employee Details Modal -->\r\n      <div v-if=\"showDetailsModal\" class=\"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50\">\r\n        <div class=\"bg-white rounded-xl shadow-xl w-full max-w-2xl m-4 p-6\">\r\n          <h2 class=\"text-2xl font-bold text-gray-800 mb-4\">Employee Details</h2>\r\n          <div class=\"space-y-4\">\r\n            <p><strong>ID:</strong> {{ selectedEmployee.employeeId }}</p>\r\n            <p><strong>Name:</strong> {{ selectedEmployee.firstName }} {{ selectedEmployee.lastName }}</p>\r\n            <p><strong>Position:</strong> {{ selectedEmployee.position }}</p>\r\n            <p><strong>Email:</strong> {{ selectedEmployee.email }}</p>\r\n            <p><strong>Sign In Time:</strong> {{ selectedEmployee.signInTime || 'N/A' }}</p>\r\n            <p><strong>Sign Out Time:</strong> {{ selectedEmployee.signOutTime || 'N/A' }}</p>\r\n            <p><strong>Status:</strong> <span :class=\"getStatusClass(selectedEmployee.status)\">{{ selectedEmployee.status || 'Absent' }}</span></p>\r\n          </div>\r\n          <div class=\"mt-6 flex justify-end\">\r\n            <button @click=\"showDetailsModal = false\" class=\"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition duration-200\">Close</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Status Message -->\r\n      <div v-if=\"statusMessage\" \r\n           :class=\"statusMessage.includes('successfully') ? 'bg-green-50 text-green-700' : 'bg-red-50 text-red-700'\"\r\n           class=\"fixed bottom-4 right-4 p-4 rounded-lg shadow-md z-50\">\r\n        {{ statusMessage }}\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\n\r\nexport default {\r\n  name: 'AdminDashboard',\r\n  data() {\r\n    return {\r\n      totalEmployees: 0,\r\n      totalPresentToday: 0,\r\n      totalLateToday: 0,\r\n      totalEligibleForSalaryToday: 0,\r\n      attendanceRecords: [],\r\n      isProcessingPayroll: false,\r\n      showDetailsModal: false,\r\n      selectedEmployee: {},\r\n      statusMessage: ''\r\n    };\r\n  },\r\n  created() {\r\n    this.fetchDashboardData();\r\n  },\r\n  methods: {\r\n    async fetchDashboardData() {\r\n      await Promise.all([\r\n        this.fetchTotalEmployees(),\r\n        this.fetchAttendanceRecords(),\r\n        this.fetchTotalLateToday(),\r\n        this.fetchEligibleForSalary()\r\n      ]);\r\n    },\r\n    async fetchTotalEmployees() {\r\n      try {\r\n        const response = await axios.get('http://localhost:7777/api/employees/count');\r\n        this.totalEmployees = response.data.total || 0;\r\n      } catch (error) {\r\n        console.error('Failed to fetch total employees:', error);\r\n        this.totalEmployees = 0;\r\n        this.showErrorMessage('Failed to fetch total employees.');\r\n      }\r\n    },\r\n    async fetchAttendanceRecords() {\r\n      try {\r\n        const today = new Date().toISOString().split('T')[0];\r\n        const response = await axios.get(`http://localhost:7777/api/attendance?date=${today}`);\r\n        this.attendanceRecords = response.data || [];\r\n        this.totalPresentToday = this.attendanceRecords.filter(r => r.signInTime).length;\r\n      } catch (error) {\r\n        console.error('Failed to fetch attendance records:', error);\r\n        this.attendanceRecords = [];\r\n        this.totalPresentToday = 0;\r\n        this.showErrorMessage('Failed to fetch attendance records.');\r\n      }\r\n    },\r\n    async fetchTotalLateToday() {\r\n      try {\r\n        const today = new Date().toISOString().split('T')[0];\r\n        const response = await axios.get(`http://localhost:7777/api/attendance/late?date=${today}`);\r\n        this.totalLateToday = response.data.total || 0;\r\n      } catch (error) {\r\n        console.error('Failed to fetch total late today:', error);\r\n        this.totalLateToday = 0;\r\n        this.showErrorMessage('Failed to fetch late employees count.');\r\n      }\r\n    },\r\n    async fetchEligibleForSalary() {\r\n      try {\r\n        const response = await axios.get('http://localhost:7777/api/employees/eligible-for-salary');\r\n        this.totalEligibleForSalaryToday = response.data.total || 0;\r\n      } catch (error) {\r\n        console.error('Failed to fetch eligible for salary:', error);\r\n        this.totalEligibleForSalaryToday = 0;\r\n        this.showErrorMessage('Failed to fetch salary eligibility data.');\r\n      }\r\n    },\r\n    async refreshAttendance() {\r\n      try {\r\n        await this.fetchAttendanceRecords();\r\n        await this.fetchTotalLateToday();\r\n        this.showSuccessMessage('Attendance data refreshed successfully!');\r\n      } catch (error) {\r\n        this.showErrorMessage('Failed to refresh attendance data.');\r\n      }\r\n    },\r\n    async processPayroll() {\r\n      this.isProcessingPayroll = true;\r\n      try {\r\n        const response = await axios.post('http://localhost:7777/api/payroll/process');\r\n        if (response.data.success) {\r\n          this.showSuccessMessage('Payroll processed successfully!');\r\n          await this.fetchEligibleForSalary();\r\n        } else {\r\n          this.showErrorMessage('Failed to process payroll.');\r\n        }\r\n      } catch (error) {\r\n        console.error('Failed to process payroll:', error);\r\n        this.showErrorMessage('Error processing payroll. Please try again.');\r\n      } finally {\r\n        this.isProcessingPayroll = false;\r\n      }\r\n    },\r\n    async exportAttendance() {\r\n      try {\r\n        const csvContent = [\r\n          ['Employee ID', 'Name', 'Position', 'Sign In Time', 'Sign Out Time', 'Status'],\r\n          ...this.attendanceRecords.map(record => [\r\n            record.employeeId,\r\n            `${record.firstName} ${record.lastName}`,\r\n            record.position,\r\n            record.signInTime || 'N/A',\r\n            record.signOutTime || 'N/A',\r\n            record.status || 'Absent'\r\n          ])\r\n        ].map(row => row.join(',')).join('\\n');\r\n\r\n        const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });\r\n        const link = document.createElement('a');\r\n        link.href = URL.createObjectURL(blob);\r\n        link.download = `attendance_${new Date().toISOString().split('T')[0]}.csv`;\r\n        document.body.appendChild(link);\r\n        link.click();\r\n        document.body.removeChild(link);\r\n        this.showSuccessMessage('Attendance exported successfully!');\r\n      } catch (error) {\r\n        console.error('Failed to export attendance:', error);\r\n        this.showErrorMessage('Failed to export attendance data.');\r\n      }\r\n    },\r\n    viewEmployeeDetails(record) {\r\n      this.selectedEmployee = { ...record };\r\n      this.showDetailsModal = true;\r\n    },\r\n    async deleteAttendance(id) {\r\n      if (confirm('Are you sure you want to delete this attendance record?')) {\r\n        try {\r\n          const response = await axios.delete(`http://localhost:7777/api/attendance/${id}`);\r\n          if (response.status === 204) {\r\n            this.attendanceRecords = this.attendanceRecords.filter(r => r.id !== id);\r\n            this.totalPresentToday = this.attendanceRecords.filter(r => r.signInTime).length;\r\n            this.showSuccessMessage('Attendance record deleted successfully!');\r\n          }\r\n        } catch (error) {\r\n          console.error('Failed to delete attendance:', error);\r\n          this.showErrorMessage('Failed to delete attendance record.');\r\n        }\r\n      }\r\n    },\r\n    logout() {\r\n      localStorage.removeItem('userId');\r\n      localStorage.removeItem('userRole');\r\n      this.$router.push('/login');\r\n    },\r\n    getStatusClass(status) {\r\n      switch (status?.toLowerCase()) {\r\n        case 'on time':\r\n          return 'text-green-600 font-medium';\r\n        case 'late':\r\n          return 'text-yellow-600 font-medium';\r\n        case 'absent':\r\n          return 'text-red-600 font-medium';\r\n        default:\r\n          return 'text-gray-600';\r\n      }\r\n    },\r\n    showSuccessMessage(message) {\r\n      this.statusMessage = message;\r\n      setTimeout(() => this.statusMessage = '', 3000);\r\n    },\r\n    showErrorMessage(message) {\r\n      this.statusMessage = message;\r\n      setTimeout(() => this.statusMessage = '', 3000);\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\nbutton:disabled {\r\n  cursor: not-allowed;\r\n  opacity: 0.7;\r\n}\r\n\r\n.hover\\:bg-gray-50:hover {\r\n  background-color: #f9fafb;\r\n}\r\n\r\n.transition {\r\n  transition: all 0.2s ease-in-out;\r\n}\r\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}