{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport axios from 'axios';\nexport default {\n  name: 'AdminLeaveManagement',\n  data() {\n    return {\n      leaveRequests: [],\n      showDetailsModalVisible: false,\n      selectedLeave: {}\n    };\n  },\n  mounted() {\n    this.fetchLeaveRequests();\n  },\n  methods: {\n    async fetchLeaveRequests() {\n      try {\n        const response = await axios.get('http://localhost:7777/api/leaves/all');\n        this.leaveRequests = response.data || [];\n      } catch (error) {\n        console.error('Failed to fetch leave requests:', error);\n        alert('Failed to load leave requests. Please try again.');\n      }\n    },\n    async refreshLeaveRequests() {\n      await this.fetchLeaveRequests();\n      alert('Leave requests refreshed!');\n    },\n    showDetailsModal(leave) {\n      this.selectedLeave = {\n        ...leave\n      };\n      this.showDetailsModalVisible = true;\n    },\n    closeDetailsModal() {\n      this.showDetailsModalVisible = false;\n      this.selectedLeave = {};\n    },\n    async approveLeave(id) {\n      try {\n        const response = await axios.put(`http://localhost:7777/api/leaves/${id}/approve`);\n        if (response.status === 200) {\n          this.leaveRequests = this.leaveRequests.map(leave => leave.id === id ? {\n            ...leave,\n            status: 'Approved'\n          } : leave);\n          alert('Leave approved successfully!');\n        }\n      } catch (error) {\n        console.error('Failed to approve leave:', error);\n        alert('Failed to approve leave. Please try again.');\n      }\n    },\n    async disapproveLeave(id) {\n      try {\n        const response = await axios.put(`http://localhost:7777/api/leaves/${id}/disapprove`);\n        if (response.status === 200) {\n          this.leaveRequests = this.leaveRequests.map(leave => leave.id === id ? {\n            ...leave,\n            status: 'Disapproved'\n          } : leave);\n          alert('Leave disapproved successfully!');\n        }\n      } catch (error) {\n        console.error('Failed to disapprove leave:', error);\n        alert('Failed to disapprove leave. Please try again.');\n      }\n    },\n    getStatusClass(status) {\n      switch (status) {\n        case 'Pending':\n          return 'text-yellow-600';\n        case 'Approved':\n          return 'text-green-600';\n        case 'Disapproved':\n          return 'text-red-600';\n        default:\n          return 'text-gray-600';\n      }\n    }\n  }\n};","map":{"version":3,"names":["axios","name","data","leaveRequests","showDetailsModalVisible","selectedLeave","mounted","fetchLeaveRequests","methods","response","get","error","console","alert","refreshLeaveRequests","showDetailsModal","leave","closeDetailsModal","approveLeave","id","put","status","map","disapproveLeave","getStatusClass"],"sources":["C:\\Users\\ASUS\\Desktop\\Payroll_system\\frontend\\src\\views\\admind\\EmployeeLeaveManagement.vue"],"sourcesContent":["<template>\r\n  <div class=\"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 p-4\">\r\n    <div class=\"max-w-6xl mx-auto\">\r\n      <div class=\"bg-white p-6 rounded-xl shadow-md\">\r\n        <div class=\"flex justify-between items-center mb-6\">\r\n          <h2 class=\"text-xl font-bold text-gray-900\">Employee Leave Management</h2>\r\n          <button @click=\"refreshLeaveRequests\" \r\n                  class=\"bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition-all duration-200\">\r\n            Refresh\r\n          </button>\r\n        </div>\r\n\r\n        <!-- Leave Requests Table -->\r\n        <div class=\"overflow-x-auto\">\r\n          <table class=\"min-w-full divide-y divide-gray-200\">\r\n            <thead class=\"bg-gray-50\">\r\n              <tr>\r\n                <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Employee Name</th>\r\n                <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Leave Start Date</th>\r\n                <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Leave End Date</th>\r\n                <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Status</th>\r\n                <th class=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Actions</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody class=\"bg-white divide-y divide-gray-200\">\r\n              <tr v-for=\"leave in leaveRequests\" :key=\"leave.id\" class=\"hover:bg-gray-50\">\r\n                <td class=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">{{ leave.employeeName }}</td>\r\n                <td class=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">{{ leave.startDate }}</td>\r\n                <td class=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">{{ leave.endDate }}</td>\r\n                <td class=\"px-6 py-4 whitespace-nowrap text-sm font-semibold\"\r\n                    :class=\"getStatusClass(leave.status)\">\r\n                  {{ leave.status }}\r\n                </td>\r\n                <td class=\"px-6 py-4 whitespace-nowrap text-sm font-medium flex gap-2\">\r\n                  <button @click=\"showDetailsModal(leave)\" \r\n                          class=\"bg-blue-50 text-blue-600 py-1.5 px-3 rounded-lg hover:bg-blue-100 transition-all duration-200\">\r\n                    View Details\r\n                  </button>\r\n                  <button v-if=\"leave.status === 'Pending'\" @click=\"approveLeave(leave.id)\" \r\n                          class=\"bg-green-50 text-green-600 py-1.5 px-3 rounded-lg hover:bg-green-100 transition-all duration-200\">\r\n                    Approve\r\n                  </button>\r\n                  <button v-if=\"leave.status === 'Pending'\" @click=\"disapproveLeave(leave.id)\" \r\n                          class=\"bg-red-50 text-red-600 py-1.5 px-3 rounded-lg hover:bg-red-100 transition-all duration-200\">\r\n                    Disapprove\r\n                  </button>\r\n                </td>\r\n              </tr>\r\n              <tr v-if=\"leaveRequests.length === 0\">\r\n                <td colspan=\"5\" class=\"px-6 py-4 text-center text-sm text-gray-500\">No leave requests found.</td>\r\n              </tr>\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Details Modal -->\r\n      <div v-if=\"showDetailsModalVisible\" class=\"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50\">\r\n        <div class=\"bg-white p-6 rounded-xl shadow-md max-w-lg w-full\">\r\n          <h2 class=\"text-xl font-bold mb-4\">Leave Request Details</h2>\r\n          <div class=\"space-y-2\">\r\n            <p><strong>Employee:</strong> {{ selectedLeave.employeeName }}</p>\r\n            <p><strong>Employee ID:</strong> {{ selectedLeave.employeeId }}</p>\r\n            <p><strong>Start Date:</strong> {{ selectedLeave.startDate }}</p>\r\n            <p><strong>End Date:</strong> {{ selectedLeave.endDate }}</p>\r\n            <p><strong>Reason:</strong> {{ selectedLeave.reason }}</p>\r\n            <p><strong>Status:</strong> <span :class=\"getStatusClass(selectedLeave.status)\">{{ selectedLeave.status }}</span></p>\r\n          </div>\r\n          <div class=\"flex justify-end gap-3 mt-6\">\r\n            <button @click=\"closeDetailsModal\" \r\n                    class=\"py-2 px-4 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-all duration-200\">\r\n              Close\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\n\r\nexport default {\r\n  name: 'AdminLeaveManagement',\r\n  data() {\r\n    return {\r\n      leaveRequests: [],\r\n      showDetailsModalVisible: false,\r\n      selectedLeave: {}\r\n    };\r\n  },\r\n  mounted() {\r\n    this.fetchLeaveRequests();\r\n  },\r\n  methods: {\r\n    async fetchLeaveRequests() {\r\n      try {\r\n        const response = await axios.get('http://localhost:7777/api/leaves/all');\r\n        this.leaveRequests = response.data || [];\r\n      } catch (error) {\r\n        console.error('Failed to fetch leave requests:', error);\r\n        alert('Failed to load leave requests. Please try again.');\r\n      }\r\n    },\r\n    async refreshLeaveRequests() {\r\n      await this.fetchLeaveRequests();\r\n      alert('Leave requests refreshed!');\r\n    },\r\n    showDetailsModal(leave) {\r\n      this.selectedLeave = { ...leave };\r\n      this.showDetailsModalVisible = true;\r\n    },\r\n    closeDetailsModal() {\r\n      this.showDetailsModalVisible = false;\r\n      this.selectedLeave = {};\r\n    },\r\n    async approveLeave(id) {\r\n      try {\r\n        const response = await axios.put(`http://localhost:7777/api/leaves/${id}/approve`);\r\n        if (response.status === 200) {\r\n          this.leaveRequests = this.leaveRequests.map(leave => \r\n            leave.id === id ? { ...leave, status: 'Approved' } : leave\r\n          );\r\n          alert('Leave approved successfully!');\r\n        }\r\n      } catch (error) {\r\n        console.error('Failed to approve leave:', error);\r\n        alert('Failed to approve leave. Please try again.');\r\n      }\r\n    },\r\n    async disapproveLeave(id) {\r\n      try {\r\n        const response = await axios.put(`http://localhost:7777/api/leaves/${id}/disapprove`);\r\n        if (response.status === 200) {\r\n          this.leaveRequests = this.leaveRequests.map(leave => \r\n            leave.id === id ? { ...leave, status: 'Disapproved' } : leave\r\n          );\r\n          alert('Leave disapproved successfully!');\r\n        }\r\n      } catch (error) {\r\n        console.error('Failed to disapprove leave:', error);\r\n        alert('Failed to disapprove leave. Please try again.');\r\n      }\r\n    },\r\n    getStatusClass(status) {\r\n      switch (status) {\r\n        case 'Pending':\r\n          return 'text-yellow-600';\r\n        case 'Approved':\r\n          return 'text-green-600';\r\n        case 'Disapproved':\r\n          return 'text-red-600';\r\n        default:\r\n          return 'text-gray-600';\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\nbutton:disabled {\r\n  cursor: not-allowed;\r\n  opacity: 0.7;\r\n}\r\n\r\n.transition-all {\r\n  transition: all 0.2s ease-in-out;\r\n}\r\n\r\n.hover\\:bg-gray-50:hover {\r\n  background-color: #f9fafb;\r\n}\r\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}